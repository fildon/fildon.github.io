<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generics aren&#39;t as scary as you think.</title>
    <meta name="description" content="You already understand generics... you just don&#39;t know you do.">

    <link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/prism.css">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="/">Rupert &#39;fildon&#39; McKay</a></h1>
    </header>

    <main class="tmpl-post">
      <h2>Generics aren&#39;t as scary as you think.</h2>

<p>I'll be demonstrating generics using TypeScript, but the core principles of generics are the same in any programming language.</p>
<h2>First things first</h2>
<p><em>You already understand generics... you just don't know you do.</em></p>
<ul>
<li>If you ever use promises <strong>you are already using generics</strong></li>
<li>If you ever use any array method <strong>you are already using generics</strong></li>
</ul>
<h2>What is a Generic?</h2>
<p>A generic is a type containing some information about another type <em>which isn't specified yet</em>.</p>
<p>Don't worry if that doesn't make sense yet. We are going to walk through some examples and build up a feeling for what this means.</p>
<p>Let's look at a concrete example that should be familiar to everyone: <em>Arrays</em></p>
<h2>Arrays are Generic</h2>
<p>The easiest way to demonstrate that Arrays are generic is to look at how existing array methods would need to be implemented. Let's take for example <code>Array.prototype.filter</code>.</p>
<p>First a refresher on how <code>filter</code> works. Given some callback function, return a new array containing only the elements in the array for which the callback function returns true.</p>
<p>Here's a simple example in which we want to get only the big numbers in an array:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> bigNumbers <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=></span> n <span class="token operator">></span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bigNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints [31, 40]</span></code></pre>
<p>Now let's pretend <code>filter</code> didn't already exist, and we wanted to make our own function from scratch. What type should our new filter function be? It will need to take an array to work on, and some sort of callback to use on each element in the array. Let's make a simplifying assumption here and say we only want this new filter to work on arrays of numbers. Then the array we take is of type <code>Array&lt;number&gt;</code> and the callback is of type <code>(num: number) =&gt; boolean</code>. That should be enough to get us started:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">numberFilter</span><span class="token punctuation">(</span><br>  array<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">,</span><br>  <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">boolean</span><br><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> result<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> num <span class="token keyword">of</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> result<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> bigNumbers <span class="token operator">=</span> <span class="token function">numberFilter</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=></span> n <span class="token operator">></span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bigNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints [31, 40]</span></code></pre>
<p>Excellent! This works. We can use it to filter an array of numbers using any sort of callback that picks some numbers and not others.</p>
<p>But notice how at no point in our filter function do we really care that <code>num</code> is a number. We don't do any sort of addition or subtraction, or use that number in any way that is specific to a number. In fact <code>num</code> in the above example could be any type and our filter would work exactly the same.</p>
<p>To really prove this point, lets show what a custom string filter function might look like:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">stringFilter</span><span class="token punctuation">(</span><br>  array<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span><br>  <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">boolean</span><br><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> result<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> str <span class="token keyword">of</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> result<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> strings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"cat"</span><span class="token punctuation">,</span> <span class="token string">"horse"</span><span class="token punctuation">,</span> <span class="token string">"dog"</span><span class="token punctuation">,</span> <span class="token string">"dinosaur"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> bigStrings <span class="token operator">=</span> <span class="token function">stringFilter</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=></span> str<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bigStrings<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints ["horse", "dinosaur"]</span></code></pre>
<p>Aside from renaming 'num' to 'str' <em>this is exactly the same implementation.</em></p>
<p>What if we could abstract the implementation from the specific type of element that gets filtered? We still have to specify a type for the array, and a type for the argument that our callback will use... but we don't care <em>specifically</em> what type, only that the type must match. Let's just call this type we don't care about &quot;T&quot; (for &quot;type&quot;).</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">genericFilter</span><span class="token generic class-name"><span class="token operator">&lt;</span>Element<span class="token operator">></span></span></span><span class="token punctuation">(</span><br>  array<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Element<span class="token operator">></span><span class="token punctuation">,</span><br>  <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>element<span class="token operator">:</span> Element<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token builtin">boolean</span><br><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> result<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> element <span class="token keyword">of</span> array<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br>  <span class="token keyword">return</span> result<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// Works with numbers!</span><br><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> bigNumbers <span class="token operator">=</span> <span class="token function">genericFilter</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=></span> n <span class="token operator">></span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bigNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints [31, 40]</span><br><br><span class="token comment">// Also works with strings!</span><br><span class="token keyword">const</span> strings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"cat"</span><span class="token punctuation">,</span> <span class="token string">"horse"</span><span class="token punctuation">,</span> <span class="token string">"dog"</span><span class="token punctuation">,</span> <span class="token string">"dinosaur"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> bigStrings <span class="token operator">=</span> <span class="token function">genericFilter</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=></span> str<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bigStrings<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prints ["horse", "dinosaur"]</span></code></pre>
<p>This is the exact same implementation again. The only thing we had to add was a peculiar <code>&lt;Element&gt;</code> annotation to the end of the function name. If we didn't add this, TypeScript would complain as soon as it sees us use <code>Element</code> and say something to the effect of &quot;I don't know what type Element is&quot;. By adding <code>&lt;Element&gt;</code> to the function name we are telling TypeScript that we intend to use <code>Element</code> as a symbol for a type <em>which isn't specified yet.</em> As soon as we invoke our filter however, we pass in an array with some specific type and only then does the type get fully specified. This is why we can use this same function to handle arrays of numbers or arrays of strings... or arrays of anything!</p>
<h2>This is only the beginning</h2>
<p>In the above examples we have walked through the process of creating a generic function. TypeScript also supports generic types and generic classes, and a handful of other features that support working with generics.</p>
<p>For example here is how you can implement a generic type declaration:</p>
<pre class="language-ts"><code class="language-ts"><span class="token comment">// A Pair is a tuple with two values of the same type</span><br><span class="token keyword">type</span> <span class="token class-name">Pair<span class="token operator">&lt;</span>Type<span class="token operator">></span></span> <span class="token operator">=</span> <span class="token punctuation">[</span>Type<span class="token punctuation">,</span> Type<span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// Then a coordinate is just a pair of numbers</span><br><span class="token keyword">type</span> <span class="token class-name">Coordinate</span> <span class="token operator">=</span> Pair<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span><br><br><span class="token comment">// Or a timespan is a pair of dates</span><br><span class="token keyword">type</span> <span class="token class-name">TimeSpan</span> <span class="token operator">=</span> Pair<span class="token operator">&lt;</span>Date<span class="token operator">></span><span class="token punctuation">;</span></code></pre>
<p>But this is really only beginning to scratch the tip of the iceberg. If you'd like to advance your understanding of generics even further, I highly recommend getting familiar with TypeScript's generic type constraints system in which you can express limitations on a generic type while still leaving it very flexible.</p>
<p>In this post we worked through establishing that array methods are generic and how we would implement our own generic function from scratch. So to end how I began:</p>
<blockquote>
<p><em>You already understand generics... and now you know you do.</em></p>
</blockquote>


    </main>

    <footer></footer>

    <!-- Current page: /blog/generics-arent-as-scary-as-you-think/ -->
  </body>
</html>
